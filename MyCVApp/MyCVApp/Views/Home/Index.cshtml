@model MyCVApp.Models.PortfolioModel
@{
    ViewData["Title"] = "Portfolio";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<style>
    .project-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
        }
</style>

<div class="container mt-4">

    <header class="mb-5 pb-4 border-bottom pt-2 position-relative">

        <div class="d-flex justify-content-center justify-content-md-end gap-3 mb-4">
            <button id="darkModeToggle" class="btn btn-outline-dark rounded-pill px-4 shadow-sm d-flex align-items-center gap-2 transition-all">
                <i class="bi bi-moon-stars-fill" id="darkModeIcon"></i>
                <span id="darkModeText">Dark Mode</span>
            </button>

            <a href="/Moegammad_Alexander_CV.pdf" download class="btn btn-primary rounded-pill px-4 shadow-sm d-flex align-items-center gap-2 fw-bold">
                <i class="bi bi-cloud-arrow-down-fill fs-5"></i>
                <span>Download CV</span>
            </a>
        </div>

        <div class="text-center">
            <h1 class="display-4 fw-bolder mb-2 tracking-tight">@Model.Name</h1>
            <h4 class="text-primary mb-4 fw-normal">@Model.Title</h4>

            <div class="d-flex flex-wrap justify-content-center gap-3 gap-md-4 text-muted mb-3 description-text">
                <span class="d-flex align-items-center gap-1"><i class="bi bi-geo-alt-fill text-primary"></i> @Model.Location</span>
                <span class="d-flex align-items-center gap-1"><i class="bi bi-telephone-fill text-primary"></i> @Model.Phone</span>
                <a href="mailto:@Model.Email" class="text-decoration-none text-muted description-text d-flex align-items-center gap-1">
                    <i class="bi bi-envelope-fill text-primary"></i> @Model.Email
                </a>
            </div>

            <div class="d-flex flex-wrap justify-content-center gap-4 mt-2">
                <a href="https://@Model.LinkedIn" target="_blank" class="text-decoration-none text-muted description-text d-flex align-items-center gap-1 fw-semibold">
                    <i class="bi bi-linkedin fs-5"></i> LinkedIn
                </a>
                <a href="https://@Model.GitHub" target="_blank" class="text-decoration-none text-muted description-text d-flex align-items-center gap-1 fw-semibold">
                    <i class="bi bi-github fs-5"></i> GitHub
                </a>
            </div>
        </div>
    </header>

    <section class="mb-5">
        <h2 class="border-bottom pb-2">Professional Summary</h2>
        <p>@Model.ProfessionalSummary</p>
    </section>

    <section class="mb-5">
        <h2 class="border-bottom pb-2 mb-4">Technical Skills</h2>
        <div class="row g-4">
            @foreach (var skill in Model.TechnicalSkills)
            {
                var parts = skill.Split(':');
                <div class="col-md-6">
                    <div class="card h-100 shadow-sm border-0">
                        <div class="card-body">
                            <h6 class="fw-bold text-primary mb-2">@parts[0]</h6>
                            <p class="mb-0">@parts[1]</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <section class="mb-5">
        <h2 class="border-bottom pb-2 mb-4">Professional Attributes</h2>
        <div class="row g-3">
            @foreach (var attribute in Model.ProfessionalAttributes)
            {
                var parts = attribute.Split(':');
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 shadow-sm border-0 border-start border-primary border-4">
                        <div class="card-body">
                            <h6 class="fw-bold mb-2">@parts[0]</h6>
                            <p class="text-muted small mb-0">@parts[1]</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <section class="mb-5">
        <h2 class="border-bottom pb-2 mb-4 d-flex align-items-center gap-2">
            <i class="bi bi-laptop text-primary"></i> Technical Projects
        </h2>
        <div class="row g-4">
            @foreach (var project in Model.TechnicalProjects)
            {
                <div class="col-md-6">
                    <div class="card h-100 shadow-sm border-0 project-card d-flex flex-column transition-all">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-3 d-flex align-items-start gap-2">
                                <i class="bi bi-folder2-open text-warning mt-1"></i>
                                @project.Title
                            </h5>

                            <div class="mb-3">
                                @foreach (var tech in project.TechStack.Split(','))
                                {
                                    <span class="badge bg-primary bg-opacity-10 text-primary border border-primary me-1 mb-1 fw-normal">
                                        @tech.Trim()
                                    </span>
                                }
                            </div>

                            <ul class="list-unstyled mb-4">
                                @foreach (var point in project.DescriptionPoints)
                                {
                                    <li class="mb-2 d-flex align-items-start gap-2">
                                        <i class="bi bi-check2-circle text-success mt-1"></i>
                                        <span class="text-muted small description-text">@point</span>
                                    </li>
                                }
                            </ul>
                        </div>

                        <div class="card-footer bg-transparent border-top-0 pt-0 mt-auto">
                            @if (!string.IsNullOrEmpty(project.AchievementsText) && project.AchievementsText.Contains("Achieved"))
                            {
                                <div class="p-2 bg-success bg-opacity-10 rounded mb-3 small text-success fw-semibold border border-success border-opacity-25 achievement-box">
                                    <i class="bi bi-trophy-fill text-warning me-1"></i>
                                    @project.AchievementsText.Replace("| GitHub:", "").Replace("Achievements & Links:", "").Replace("Achievements:", "").Trim()
                                </div>
                            }

                            <a href="@project.GitHubUrl" target="_blank" class="btn btn-dark btn-sm w-100 d-flex align-items-center justify-content-center gap-2 rounded-pill shadow-sm github-btn">
                                <i class="bi bi-github"></i> View Repository
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <section class="mb-5">
        <h2 class="border-bottom pb-2 mb-4 d-flex align-items-center gap-2">
            <i class="bi bi-mortarboard text-primary"></i> Education History
        </h2>

        <div class="ps-3 border-start border-2 border-primary position-relative ms-2">

            @foreach (var edu in Model.Education)
            {
                <div class="mb-4 position-relative">
                    <span class="position-absolute top-0 start-0 translate-middle p-2 bg-primary border border-2 border-white rounded-circle" style="margin-left: -16px; margin-top: 12px;"></span>

                    <div class="ms-4 card shadow-sm border-0 project-card">
                        <div class="card-body p-4">
                            <h5 class="fw-bold mb-1">@edu.Degree</h5>

                            <h6 class="text-primary fw-semibold mb-2">@edu.Institution</h6>

                            @if (!string.IsNullOrEmpty(edu.Status))
                            {
                                <p class="text-muted small mb-3">
                                    <i class="bi bi-calendar-check me-1"></i> @edu.Status
                                </p>
                            }

                            @if (!string.IsNullOrEmpty(edu.AcademicHighlights))
                            {
                                <div class="mt-2 pt-3 border-top">
                                    <p class="mb-0 small description-text lh-lg">
                                        <i class="bi bi-award-fill text-warning fs-5 me-2 align-middle"></i>
                                        <strong>Distinctions & Highlights:</strong><br />
                                        @edu.AcademicHighlights.Replace("Academic Highlights:", "").Trim()
                                    </p>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <section class="mb-5">
        <h2 class="border-bottom pb-2 mb-4 d-flex align-items-center gap-2">
            <i class="bi bi-award text-primary"></i> Certifications
        </h2>

        <div class="row g-4">
            @foreach (var cert in Model.Certifications)
            {
                var certParts = cert.Title.Split('|');
                var certName = certParts.Length > 0 ? certParts[0].Trim() : cert.Title;
                var certIssuer = certParts.Length > 1 ? certParts[1].Trim() : "";
                var certDate = certParts.Length > 2 ? certParts[2].Trim() : "";

                <div class="col-12">
                    <div class="card shadow-sm border-0 project-card border-start border-primary border-4">
                        <div class="card-body p-4 d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3">

                            <div>
                                <h5 class="fw-bold mb-1 d-flex align-items-center gap-2">
                                    <i class="bi bi-patch-check-fill text-warning"></i> @certName
                                </h5>

                                @if (!string.IsNullOrEmpty(certIssuer))
                                {
                                    <h6 class="text-primary fw-semibold mb-2">@certIssuer</h6>
                                }

                                <p class="text-muted small mb-0 description-text">@cert.Description</p>
                            </div>

                            @if (!string.IsNullOrEmpty(certDate))
                            {
                                <div class="text-md-end flex-shrink-0 mt-3 mt-md-0">
                                    <span class="d-inline-block border border-secondary border-opacity-25 rounded-pill px-3 py-1 text-muted small fw-semibold">
                                        <i class="bi bi-calendar3 me-1"></i> @certDate
                                    </span>
                                </div>
                            }

                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <script>
        document.getElementById('darkModeToggle').addEventListener('click', function() {
            document.body.classList.toggle('bg-dark');
            document.body.classList.toggle('text-light');

            let toggleBtn = document.getElementById('darkModeToggle');
            let icon = document.getElementById('darkModeIcon');
            let text = document.getElementById('darkModeText');

            toggleBtn.classList.toggle('btn-outline-dark');
            toggleBtn.classList.toggle('btn-outline-light');

            if (document.body.classList.contains('bg-dark')) {
                icon.classList.remove('bi-moon-stars-fill');
                icon.classList.add('bi-sun-fill');
                text.innerText = 'Light Mode';
            } else {
                icon.classList.remove('bi-sun-fill');
                icon.classList.add('bi-moon-stars-fill');
                text.innerText = 'Dark Mode';
            }

            let cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.classList.toggle('bg-secondary');
                card.classList.toggle('text-white');
            });

            let listItems = document.querySelectorAll('.list-group-item');
            listItems.forEach(item => {
                item.classList.toggle('text-light');
            });

            let gitHubBtns = document.querySelectorAll('.github-btn');
            gitHubBtns.forEach(btn => {
                btn.classList.toggle('btn-dark');
                btn.classList.toggle('btn-light');
            });

            let greenTexts = document.querySelectorAll('.text-success, .text-success-toggle');
            greenTexts.forEach(text => {
                if (text.classList.contains('text-success')) {
                    text.classList.remove('text-success');
                    text.classList.add('text-light');
                    text.classList.add('text-success-toggle');
                } else {
                    text.classList.remove('text-light');
                    text.classList.remove('text-success-toggle');
                    text.classList.add('text-success');
                }
            });

            let mutedTexts = document.querySelectorAll('.text-muted, .text-light-toggle');
            mutedTexts.forEach(text => {
                if (text.classList.contains('text-muted')) {
                    text.classList.remove('text-muted');
                    text.classList.add('text-light');
                    text.classList.add('text-light-toggle');
                } else {
                    text.classList.remove('text-light');
                    text.classList.remove('text-light-toggle');
                    text.classList.add('text-muted');
                }
            });
        });
    </script>
</div>